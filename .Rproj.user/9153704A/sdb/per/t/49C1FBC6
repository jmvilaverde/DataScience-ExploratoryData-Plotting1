{
    "contents" : "##Function that draws the plot into the PNG\n##The function calls to get_data_file_zip to obtain the data\nplot4 <- function(){\n        \n        #Get data subset\n        data <- get_data_file_zip()\n        \n        #set PNG values\n        filePNG = \"plot4.png\"\n        pngWidth = 480\n        pngHeight = 480\n        \n        #Force output to English for weekdays label in x axis\n        Sys.setlocale(\"LC_TIME\", \"English\")\n        \n        #Open devide PNG, set width and height\n        png(file=filePNG,width=pngWidth,height=pngHeight)\n        \n        ##Create PLOTS\n        #Set configuration to put 4 plots in 2 columns and 2 rows\n        par(mfcol = c(2,2))\n        \n        ##PLOT UPPER LEFT\n        #Create plot, type = \"l\" to obtain \"lineal graphic\"\n        #label x axis = \"\", label y axis = \"Global Active Power\"\n        plot(data$datetime,data$Global_active_power, type=\"l\", xlab = \"\", ylab = \"Global Active Power\")\n        \n        ##PLOT LOWER LEFT\n        #Create plot, type = \"l\" to obtain \"lineal graphic\"\n        #label x axis = \"\", label y axis = \"Energy sub metering\"\n        plot(data$datetime,data$Sub_metering_1, type=\"l\", xlab = \"\", ylab = \"Energy sub metering\")\n        #Add a line for Sub_metering_2, color red\n        lines(data$datetime,data$Sub_metering_2, col = \"red\")\n        #Add a line for Sub_metering_3, color blue\n        lines(data$datetime,data$Sub_metering_3, col = \"blue\")\n        #Add a legend in top right corner, no border, escalated to the correct size, \n        #set line wide, set colors and text per label\n        legend(\"topright\", bty = \"n\", cex = 0.9, lwd = 1, col = c(\"black\", \"red\", \"blue\"), \n               legend = c(\"Sub_metering_1\", \"Sub_metering_2\", \"Sub_metering_3\"))\n        \n        ##PLOT UPPER RIGHT\n        #Create plot, type = \"l\" to obtain \"lineal graphic\", label x axis = \"datetime\", label y axis = \"Voltage\"\n        plot(data$datetime,data$Voltage, type=\"l\", xlab = \"datetime\", ylab = \"Voltage\")\n        \n        ##PLOT LOWER RIGHT\n        #Create plot, type = \"l\" to obtain \"lineal graphic\", label x axis = \"datetime\", label y axis = \"Global_reactive_power\"\n        plot(data$datetime,data$Global_reactive_power, type=\"l\", xlab = \"datetime\", ylab = \"Global_reactive_power\")\n        \n        #Close PNG\n        dev.off()\n}\n\n##Function that download the zip file, unzip it, process the data and subsetting it\nget_data_file_zip <- function(directory = \"data\", \n                              fileUrl = \"https://d396qusza40orc.cloudfront.net/exdata%2Fdata%2Fhousehold_power_consumption.zip\", \n                              fileDest=\"household_power_consumption.txt\"){\n        \n        #Set directory path\n        directory <- paste(\".\",directory,sep=\"/\")\n        \n        #Check if the directory exists, if doesn't exists, create it\n        if (!file.exists(directory)){\n                dir.create(directory)\n        }\n        \n        #set the name for our downloaded zip file\n        tempZip <- paste(directory, \"tempZip.zip\", sep = \"/\")\n        #set the name for our unzipped file\n        fileDest <- paste(directory, fileDest, sep = \"/\")\n        \n        #Check if the temporal zip file existis, if doesn't then download it\n        if (!file.exists(tempZip)){\n                download.file(fileUrl, destfile = tempZip)\n        }\n        \n        #Check if the unzipped file exists, if doesn't then unzip de zip file\n        if (!file.exists(fileDest)){\n                unzip(tempZip, exdir = directory)\n        }\n        \n        #Read the data from the file, with header, separator is \";\" and NA values are represented as ? in the file\n        data <- read.table(fileDest, header=TRUE, sep=\";\", na.strings=\"?\")\n        \n        #Set the field Date as a date format\n        data$Date <- as.Date(data$Date, \"%d/%m/%Y\")\n        \n        #Keep only the subset with Date \"2007-02-01\" or \"2007-02-02\"\n        data <- subset(data,Date == \"2007-02-01\" | Date == \"2007-02-02\")\n        \n        #Create a new column \"datetime\" to put on it date + time\n        data[\"datetime\"] <- NA\n        data$datetime <- strptime(paste(data$Date,data$Time,sep=\" \"), \"%F %H:%M:%S\")\n        \n        \n        data\n}\n",
    "created" : 1431024305541.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2883213679",
    "id" : "49C1FBC6",
    "lastKnownWriteTime" : 1431071131,
    "path" : "D:/Privado/repos/4.ExploratoryDataAnalysis/ExData_Plotting1/plot4.R",
    "project_path" : "plot4.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}